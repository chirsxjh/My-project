### OSPF、ISIS、BGP等常用路由协议
#### OSPF
**简介**
OSPF:链路状态路由协议    
目的是为了克服距离矢量路由协议的缺点。链路状态路由协议具有如下特征。 
![enter image description here](https://pic2.zhimg.com/v2-e1663d006a86b491bdf898d82af236a1_b.jpg)
链路状态路由协议仅在网络拓扑发生变化时才会生成路由更新。链路的状态发生变化后，检测到变化的设备将生成一个针对该链路状态通告（LSA），如下图
![enter image description here](https://pic4.zhimg.com/v2-633543f16866889e0637d5dedcf46bd3_b.jpg)
链路状态路由器对LSDB应用Dijkstra算法（即SPF算法）以建立SPF树。每台路由器都从其SPF树中选择最佳路径，并将其加入到路由表中。设备都更新其数据库，然后更新路由表以反映新的拓扑。如上图所示，LSDB用于计算穿越网络的最佳路径。链路状态路由器对LSDB应用Dijkstra算法（即SPF算法）以建立SPF树。每台路由器都从其SPF树中选择最佳路径，并将其加入到路由表中。我们可以将LSDB视为一个城市的地图，城市中的每幅地图都相同，就像同一个区域内所有路由器的LSDB都相同一样。我们在城市中各个地点，各幅地图之间唯一的差别就是“当前位置”。根据当前位置，我们可以确定前往每个地点的最佳路线；前往特定地点的最佳路线随着我们当前所处的位置而异。链路状态路由器的功能与此类似，它们从自己的角度出发，使用LSDB计算前往区域内每个网络的最佳路径。分发路由信息和计算路由的方式，OSPF和IS-IS都属于链路状态路由协议。运行链路状态路由协议的路由器从网络或网络的指定区域内的所有路由器那里收集路由信息，然后每台路由器都使用Dijkatar（SPF）算法分别计算其前往网络中各个目的地的最佳路径。来自某台路由器的错误信息导致混乱的可能性较低，因为每台路由器都有其对网络的认识。为确保网络中所有的路由器都作出一致的路由选择决策，每台路由器都必须记录下述信息。
![](https://pic4.zhimg.com/v2-802e336fbfc4c94ef834f585822ab1bf_b.jpg)
1）直接相连的邻接路由器：失去与邻接路由器的关系后，路由器将在几秒钟之内将该邻居提供的所有路径作废，并重新计算路径。在OSPF中，有关邻居的信息存储在邻居表中，这个表也被称为邻接关系数据库。 2）网络或区域内的其他路由器及其连接的网路：路由器通过LSA来获得其他路由器和网络，LSA被扩散到整个网络，它存储在拓扑表或数据库（即LSDB）中。 3）前往每个目的地的最佳路径：每台路由器都使用Dijkstra（SPF）算法独立地计算前往网络中心每个目的地的最佳路径。所有路径都存储在LSDB中。最佳路径被加入到路由表（也称为转发数据库）中。路由器收到分组后，将根据路由表中的信息对其进行转发。OSPF多种表叫法:  ![enter image description here](https://pic4.zhimg.com/v2-d435e988706fe1ae48ae3d3a1db60ecb_b.jpg)
为保存这些表，需要占用内存资源，这是链路状态协议的一个缺点。然而，在同一个区域内，所有OSPF路由器的拓扑表（LSDB）都相同，其中包含有关区域中所有路由器和链路的完整信息，因此每台路由器都能根据开销独立地选择前往区域中每个网络的无环路高效路径。还克服了距离矢量路由协议“根据流言选择路由”的缺点。运行距离矢量路由协议的路由器依赖于邻居的路由抉择。路由器并不完全知道网络拓扑；而运行链路状态路由协议的每台路由器都完全了解网络拓扑，能够根据准确的网络拓扑信息独立地做出决策。  

#### isis
ISIS是一个分级的链接状态路由协议，基于DECnetPhaseV路由算法，实际上与OSPF非常相似，它也使用Hello协议寻找毗邻节点，使用一个传播协议发送链接信息。ISIS可以在不同的子网上操作，包括广播型的LAN、WAN和点到点链路。由于IP网络的普遍存在，一般所称的IS-IS协议，通常是指集成IS-IS协议。

#### 边界网关协议（BGP）
是运行于 TCP 上的一种自治系统的路由协议。 BGP 是唯一一个用来处理像因特网大小的网络的协议，也是唯一能够妥善处理好不相关路由域间的多路连接的协议。 BGP 构建在 EGP 的经验之上。 BGP 系统的主要功能是和其他的 BGP 系统交换网络可达信息。网络可达信息包括列出的自治系统（AS）的信息。这些信息有效地构造了 AS 互联的拓朴图并由此清除了路由环路，同时在 AS 级别上可实施策略决策。

#### VRRP
VRRP（Virtual Router Redundancy Protocol）虚拟路由冗余协议，来解决局域网主机访问外部网络的可靠性问题。

VRRP是一种容错协议，它通过把几台路由设备联合组成一台虚拟的路由设备，并通过一定的机制来保证当主机的下一跳设备出现故障时，可以及时将业务切换到其它设备，从而保持通讯的连续性和可靠性。

使用VRRP的优势在于：既不需要改变组网情况，也不需要在主机上配置任何动态路由或者路由发现协议，就可以获得更高可靠性的缺省路由。

VRRP协议对应的是RFC3768，该协议仅适用于IPv4。

#### ACl
访问控制列表（Access Control List，ACL） 是路由器和交换机接口的指令列表，用来控制端口进出的数据包。ACL适用于所有的被路由协议，如IP、IPX、AppleTalk等。  
信息点间通信和内外网络的通信都是企业网络中必不可少的业务需求，为了保证内网的安全性，需要通过安全策略来保障非授权用户只能访问特定的网络资源，从而达到对访问进行控制的目的。简而言之，ACL可以过滤网络中的流量，是控制访问的一种网络技术手段。
配置ACL后，可以限制网络流量，允许特定设备访问，指定转发特定端口数据包等。如可以配置ACL，禁止局域网内的设备访问外部公共网络，或者只能使用FTP服务。ACL既可以在路由器上配置，也可以在具有ACL功能的业务软件上进行配置。
ACL是物联网中保障系统安全性的重要技术，在设备硬件层安全基础上，通过对在软件层面对设备间通信进行访问控制，使用可编程方法指定访问规则，防止非法设备破坏系统安全，非法获取系统数据。

#### NAT
NAT（Network Address Translation，网络地址转换）是1994年提出的。当在专用网内部的一些主机本来已经分配到了本地IP地址（即仅在本专用网内使用的专用地址），但现在又想和因特网上的主机通信（并不需要加密）时，可使用NAT方法。  
这种方法需要在专用网连接到因特网的路由器上安装NAT软件。装有NAT软件的路由器叫做NAT路由器，它至少有一个有效的外部全球IP地址。这样，所有使用本地地址的主机在和外界通信时，都要在NAT路由器上将其本地地址转换成全球IP地址，才能和因特网连接。  
另外，这种通过使用少量的公有IP 地址代表较多的私有IP 地址的方式，将有助于减缓可用的IP地址空间的枯竭。在RFC 2663中有对NAT的说明。

#### vpn
虚拟专用网络(VPN)的功能是：在公用网络上建立专用网络，进行加密通讯。在企业网络中有广泛应用。VPN网关通过对数据包的加密和数据包目标地址的转换实现远程访问。VPN有多种分类方式，主要是按协议进行分类。VPN可通过服务器、硬件、软件等多种方式实现。


问：linux下，如何查找一个文件的第200行并且输出
答;   
tail -n 1000：显示最后1000行

tail -n +1000：从1000行开始显示，显示1000行以后的

head -n 1000：显示前面1000行

问： TCP协议中，TCP_NODELAY和TCP_NOPUSH的两个参数的含义
